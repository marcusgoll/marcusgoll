{
  email marcusgoll@gmail.com
}

# Force www to apex
www.marcusgoll.com {
  redir https://marcusgoll.com{uri} 308
}
www.cfipros.com {
  redir https://cfipros.com{uri} 308
}

# Main site - Next.js app (marcusgoll.com)
# TODO: Currently points to Ghost, will change to next:3000 after deployment
marcusgoll.com {
  header Strict-Transport-Security "max-age=15768000; includeSubDomains"
  reverse_proxy ghost:2368
}

# Ghost CMS Admin (ghost.marcusgoll.com)
ghost.marcusgoll.com {
  header Strict-Transport-Security "max-age=15768000; includeSubDomains"
  reverse_proxy ghost:2368
}

# Supabase API (api.marcusgoll.com)
api.marcusgoll.com {
  header Strict-Transport-Security "max-age=15768000; includeSubDomains"
  reverse_proxy kong:8002
}

# CFI Pros - Next.js app (existing)
cfipros.com {
  header Strict-Transport-Security "max-age=15768000; includeSubDomains"
  reverse_proxy next:3000
}

# CFI Pros API - FastAPI (existing)
api.cfipros.com {
  header Strict-Transport-Security "max-age=15768000; includeSubDomains"
  reverse_proxy api:8000
}
