#0 building with "desktop-linux" instance using docker driver

#1 [internal] load build definition from Dockerfile
#1 transferring dockerfile: 2.31kB 0.0s done
#1 DONE 0.1s

#2 [internal] load metadata for docker.io/library/node:20-alpine
#2 ...

#3 [auth] library/node:pull token for registry-1.docker.io
#3 DONE 0.0s

#2 [internal] load metadata for docker.io/library/node:20-alpine
#2 DONE 0.7s

#4 [internal] load .dockerignore
#4 transferring context:
#4 transferring context: 482B 0.0s done
#4 DONE 0.2s

#5 [internal] load build context
#5 DONE 0.0s

#6 [base 1/4] FROM docker.io/library/node:20-alpine@sha256:6178e78b972f79c335df281f4b7674a2d85071aae2af020ffa39f0a770265435
#6 resolve docker.io/library/node:20-alpine@sha256:6178e78b972f79c335df281f4b7674a2d85071aae2af020ffa39f0a770265435 0.1s done
#6 CACHED

#7 [production  2/11] WORKDIR /app
#7 CACHED

#5 [internal] load build context
#5 transferring context: 619.60kB 1.1s done
#5 DONE 1.1s

#8 [production  3/11] RUN apk add --no-cache curl
#8 0.509 fetch https://dl-cdn.alpinelinux.org/alpine/v3.22/main/x86_64/APKINDEX.tar.gz
#8 0.777 fetch https://dl-cdn.alpinelinux.org/alpine/v3.22/community/x86_64/APKINDEX.tar.gz
#8 1.021 (1/9) Installing brotli-libs (1.1.0-r2)
#8 1.059 (2/9) Installing c-ares (1.34.5-r0)
#8 1.090 (3/9) Installing libunistring (1.3-r0)
#8 1.135 (4/9) Installing libidn2 (2.3.7-r0)
#8 1.165 (5/9) Installing nghttp2-libs (1.65.0-r0)
#8 1.194 (6/9) Installing libpsl (0.21.5-r3)
#8 1.223 (7/9) Installing zstd-libs (1.5.7-r0)
#8 1.257 (8/9) Installing libcurl (8.14.1-r2)
#8 1.294 (9/9) Installing curl (8.14.1-r2)
#8 1.327 Executing busybox-1.37.0-r19.trigger
#8 1.333 OK: 15 MiB in 27 packages
#8 DONE 1.4s

#9 [base 2/4] RUN apk add --no-cache libc6-compat curl
#9 0.522 fetch https://dl-cdn.alpinelinux.org/alpine/v3.22/main/x86_64/APKINDEX.tar.gz
#9 0.790 fetch https://dl-cdn.alpinelinux.org/alpine/v3.22/community/x86_64/APKINDEX.tar.gz
#9 1.039 (1/12) Installing brotli-libs (1.1.0-r2)
#9 1.079 (2/12) Installing c-ares (1.34.5-r0)
#9 1.109 (3/12) Installing libunistring (1.3-r0)
#9 1.154 (4/12) Installing libidn2 (2.3.7-r0)
#9 1.184 (5/12) Installing nghttp2-libs (1.65.0-r0)
#9 1.212 (6/12) Installing libpsl (0.21.5-r3)
#9 1.241 (7/12) Installing zstd-libs (1.5.7-r0)
#9 1.277 (8/12) Installing libcurl (8.14.1-r2)
#9 1.311 (9/12) Installing curl (8.14.1-r2)
#9 1.342 (10/12) Installing musl-obstack (1.2.3-r2)
#9 1.369 (11/12) Installing libucontext (1.3.2-r0)
#9 1.396 (12/12) Installing gcompat (1.1.0-r4)
#9 1.424 Executing busybox-1.37.0-r19.trigger
#9 1.428 OK: 15 MiB in 30 packages
#9 DONE 1.6s

#10 [production  4/11] COPY package.json package-lock.json* ./
#10 DONE 0.4s

#11 [base 3/4] WORKDIR /app
#11 DONE 0.9s

#12 [production  5/11] RUN npm ci --only=production
#12 ...

#13 [base 4/4] COPY package.json package-lock.json* ./
#13 DONE 0.3s

#14 [builder 1/3] RUN npm ci
#14 ...

#12 [production  5/11] RUN npm ci --only=production
#12 1.220 npm warn config only Use `--omit=dev` to omit dev dependencies from the install.
#12 12.78 
#12 12.78 added 273 packages, and audited 274 packages in 12s
#12 12.78 
#12 12.78 145 packages are looking for funding
#12 12.78   run `npm fund` for details
#12 12.78 
#12 12.78 found 0 vulnerabilities
#12 12.78 npm notice
#12 12.78 npm notice New major version of npm available! 10.8.2 -> 11.6.2
#12 12.78 npm notice Changelog: https://github.com/npm/cli/releases/tag/v11.6.2
#12 12.78 npm notice To update run: npm install -g npm@11.6.2
#12 12.78 npm notice
#12 DONE 13.9s

#14 [builder 1/3] RUN npm ci
#14 13.56 
#14 13.56 added 559 packages, and audited 560 packages in 13s
#14 13.56 
#14 13.56 270 packages are looking for funding
#14 13.56   run `npm fund` for details
#14 13.56 
#14 13.56 found 0 vulnerabilities
#14 13.57 npm notice
#14 13.57 npm notice New major version of npm available! 10.8.2 -> 11.6.2
#14 13.57 npm notice Changelog: https://github.com/npm/cli/releases/tag/v11.6.2
#14 13.57 npm notice To update run: npm install -g npm@11.6.2
#14 13.57 npm notice
#14 DONE 13.7s

#15 [builder 2/3] COPY . .
#15 DONE 0.2s

#16 [builder 3/3] RUN npm run build
#16 0.401 
#16 0.401 > marcusgoll@1.0.0 build
#16 0.401 > next build
#16 0.401 
#16 1.039  â¨¯ Failed to load next.config.ts, see more info here https://nextjs.org/docs/messages/next-config-error
#16 1.040 
#16 1.040 > Build error occurred
#16 1.046 Error: 
#16 1.046 â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
#16 1.046 ğŸš¨ ENVIRONMENT VARIABLE VALIDATION FAILED
#16 1.046 â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
#16 1.046 
#16 1.046 7 validation error(s) found:
#16 1.046 âŒ Missing required environment variable: PUBLIC_URL
#16 1.046    Description: Base URL for the application
#16 1.046    Example: http://localhost:3000 (dev) or https://marcusgoll.com (prod)
#16 1.046 
#16 1.046 âŒ Missing required environment variable: DATABASE_URL
#16 1.046    Description: PostgreSQL connection string
#16 1.046    Example: postgresql://user:password@localhost:5432/marcusgoll
#16 1.046 
#16 1.046 âŒ Missing required environment variable: NEXT_PUBLIC_SUPABASE_URL
#16 1.046    Description: Supabase API URL (client-side accessible)
#16 1.046    Example: http://localhost:54321 (dev) or https://api.marcusgoll.com (prod)
#16 1.046 
#16 1.046 âŒ Missing required environment variable: NEXT_PUBLIC_SUPABASE_ANON_KEY
#16 1.046    Description: Supabase anonymous key (public)
#16 1.046    Example: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9...
#16 1.046 
#16 1.046 âŒ Missing required environment variable: SUPABASE_SERVICE_ROLE_KEY
#16 1.046    Description: Supabase service role key (server-side only)
#16 1.046    Example: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9...
#16 1.046 
#16 1.046 âŒ Missing required environment variable: NEWSLETTER_FROM_EMAIL
#16 1.046    Description: Verified sender email address for newsletters
#16 1.046    Example: newsletter@marcusgoll.com
#16 1.046 
#16 1.046 âŒ Missing required environment variable: RESEND_API_KEY or MAILGUN_API_KEY
#16 1.046    Description: API key for newsletter/email service (at least one required)
#16 1.046    Example: re_xxxx (Resend) or key-xxxx (Mailgun)
#16 1.046 
#16 1.046 ğŸ“‹ Please check .env.example for required configuration.
#16 1.046 
#16 1.046 ğŸ’¡ Setup instructions:
#16 1.046    1. Copy .env.example to .env.local (development)
#16 1.046    2. Fill in all required values
#16 1.046    3. See docs/ENV_SETUP.md for detailed setup guide
#16 1.046 
#16 1.046 â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
#16 1.046 
#16 1.046     at validateEnvironmentVariables (lib/validate-env.ts:185:15)
#16 1.046     at Object.<anonymous> (next.config.compiled.js:22:47)
#16 ERROR: process "/bin/sh -c npm run build" did not complete successfully: exit code: 1
------
 > [builder 3/3] RUN npm run build:
1.046 
1.046 ğŸ’¡ Setup instructions:
1.046    1. Copy .env.example to .env.local (development)
1.046    2. Fill in all required values
1.046    3. See docs/ENV_SETUP.md for detailed setup guide
1.046 
1.046 â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
1.046 
1.046     at validateEnvironmentVariables (lib/validate-env.ts:185:15)
1.046     at Object.<anonymous> (next.config.compiled.js:22:47)
------
Dockerfile:47
--------------------
  45 |     # Build Next.js application
  46 |     # Environment variables prefixed with NEXT_PUBLIC_ are baked into build
  47 | >>> RUN npm run build
  48 |     
  49 |     # ============================================================================
--------------------
ERROR: failed to build: failed to solve: process "/bin/sh -c npm run build" did not complete successfully: exit code: 1

View build details: docker-desktop://dashboard/build/desktop-linux/desktop-linux/o2ttgf4d7wwj33g13hh9bifgv
